じゃんけんゲーム Step4
=========================

## Step4: 勝敗をカウントできるようにする

**ゴール**

![Step4のゴール](https://github.com/TechZemi/Janken/blob/master/README/Step4.png?raw=true)

前回までで１回のじゃんけんの勝敗が分かるところまでできました。
あとはそれをカウントして、２回ユーザか相手が勝ったらゲームの決着です。

ここでは以下の動作をする「終了判定」関数を作りたいと思います。

**何ができるようになる？**

__勝敗のカウント__とカウントした数による__分岐__を使えるようになると、
RPGを始めとするゲームの__フラグ管理__ができるようになります。

フラグによる条件分岐はプログラミングの基本ながら、ユーザの選択あるいは行動により
その後の動作をガラリと変える、大変強力な武器です。

ここで使いこなして、じゃんけんゲームをどんどん改造していこう！

---


終了判定関数は、

* １回のじゃんけんが終わった時に呼びます
* 引数に勝った方（「'ユーザ'」または「'相手'」）を渡して使います
* ユーザまたは相手が２回勝っていたら、ゲームを終了し、勝者をダイアログで表示します
* ユーザも相手もまだ２回勝っていなかったら、何もしません


```
    function 終了判定(勝った方) {
        /* 自分または相手が２回勝っていたら、ゲームを終了 */
        /* 自分も相手もまだ２回勝っていなかったら、何もしません */
    }
```

## 「ユーザまたは相手が２回勝っていたら」はどうやったら分かる？

if-else文を使って

* ユーザまたは相手が２回勝っていたら -> 終わり
* そうじゃなかったら -> 次へ

としたいです。

どうすればコンピュータが「ユーザまたは相手が２回勝っていたら」が分かるか、
考えてみましょう。

**今持っている武器**

| 武器      | 役割       |
|:---------:|------------|
| 変数      | 値（数字や文字列）を入れておく箱。コンピュータが何かを覚えておくには変数が必要。 |
| 関数      | 呼び出すことで、一連の処理を行う機械。                           |
| if-else文 | 場合分け（もし◯◯だったら☓☓、そうじゃなかったら△△）をする書き方。 |

**ヒント**
* コンピュータが何かを覚えておくには、変数が必要ですね
* まず「ユーザが２回勝っていたら」をコンピュータが分かるようにしましょう


## Step4+1: 勝敗を見て分かるようにしよう

今が何回戦で、ユーザが勝ったのか負けたのかを見て分かるようにカウンターを用意しよう。
カウンターのために、以下の画像を用意しています。

| 画像が意味する内容 | 画像のパス          | 画像       |
|:-------------------|:--------------------|------------|
| まだ行われていない | /images/counter.png | ![counter](https://github.com/TechZemi/Janken/blob/master/images/counter.png?raw=true) |
| ユーザの勝ち       | /images/win.png     | ![win](https://github.com/TechZemi/Janken/blob/master/images/win.png?raw=true) |
| ユーザの負け       | /images/lose.png    | ![lose](https://github.com/TechZemi/Janken/blob/master/images/lose.png?raw=true) |

### HTMLとCSSで初めの状態を作る

まずはまだじゃんけんが行われていない状態、３つすべてが灰色な状態を実現しよう。
カウンターのためのHTMLとCSSには、以下のコードがヒントです。

以下では箇条書きを書くためのulタグとliタグを使っおうとしています。
liタグの一つひとつに上の画像を背景として表示し、勝ち負けを分かるようにしましょう。

これだけじゃもちろん表示されない。HTMLとCSSをどうやって関連付けるか考えよう。

```
    <ul>
      <li></li>
      <li></li>
      <li></li>
    </ul>
```

```
    display: inline-block;
    background: url('./images/counter.png');
    width: 40px;
    height: 40px;
    margin: 10px;
```

### JavaScriptで勝敗が決まった時のカウンターの動きを決める

まずはカウンタのHTMLをJavaScriptで使えるよう、物語の中に召喚しよう。

HTMLタグ一つずつを召喚する場合は「document.querySelector('呼び出しの条件')」を
使いました。ここでは、ulタグ以下の３つのliを、一度に召喚するための関数を使います。

```
var カウンター = document.querySelectorAll('liを呼び出す指定');
```

document.<ruby><rb>query</rb><rt>クエリ</rt><rb>SelectorAll</rb><rt>セレクタオール</rt></ruby>関数
を使うと、呼び出しの条件に当てはまる全部の要素（HTMLタグ）が一度に取得できます。

ここでは３つのliを取得できるように引数を指定しましょう。

取得したliはカウンター変数に入れられます。
この時、カウンター変数の中には、値が複数入る『配列』が入っています。





## Step4+2: 次のゲームをできるようにしよう

２回戦あるいは３回戦まで戦って、決着したのなら、次ははじめからまたじゃんけんが
できるようにしましょう。

じゃんけんゲームを成り立たせるために用意したもの、ゲーム中に変わったものを
**初期化**するようにします。
