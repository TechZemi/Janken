じゃんけんゲーム Step3
=========================

## Step3: ユーザと相手、どちらが勝ちかを分かるようにする

**ゴール**

![Step3のゴール](https://github.com/TechZemi/Janken/blob/master/README/Step3.png?raw=true)

前回までで、ユーザの手、相手の手を選ぶところまでができました。
今回は、どちらの手が強いかを判定するところをやっていきましょう。

判定するための関数をまずは用意しましょう。

```
    function 判定() {
        /* 判定処理を書く */
    }
```

関数は、一連の決められた動作をする機械でした。
引数を与えることで、その引数によって動作を変えることが可能でした。

今から作る判定関数は、『ユーザの手』と『相手の手』によって、『どちらが勝ちか』を
判定したいわけです。

このとき、『ユーザの手』と『相手の手』の２つを引数にします。


```
    function 判定(ユーザの手, 相手の手) {
        /* 判定処理を書く */
    }
```

そして判定した結果を弾き出すようにします。

```
    function 判定(ユーザの手, 相手の手) {
        
        // 判定処理
        if ( /* ユーザの勝ち */ ) {
            return 'ユーザ';    
        } else if ( /* 相手の勝ち */ ) {
            return '相手';    
        } 
        
        return 'あいこ';
    }
```

<ruby><rb>return</rb><rt>リターン</rt></ruby>というキーワードが出てきました。
returnは戻るという意味で、関数が値を返すときに使うキーワードです。

関数内でreturnが実行されると、その関数は値を返し、その時点で処理を終えます。
return以降の文は実行されません。

**例**
```
function ランダムな数を返す() {
    var 乱数 = Math.random();
    乱数 = 乱数 * 10;
    乱数 = Math.floor(乱数);
    
    return 乱数;  // ← 関数は乱数（の中身）を変えして処理終了
    
    alert('乱数 ' + 乱数); // ← この一文は実行されない
}
```

例えば自動販売機は（お金を入れて）飲みたいジュースを選ぶと選んだ結果としてジュースの缶が出てきます。
この場合、引数が『飲みたいジュース』で結果が『ジュースの缶』です。

これを関数のように書くと以下のようになります。

**例** 

```
function 自動販売機(飲みたいジュース) {

    if ( 飲みたいジュース == 'コーラ' ) {
        
        return コーラの缶;
        
    } else if ( 飲みたいジュース == 'お茶' ) {
        
        return お茶の缶;
        
    } else if ( 飲みたいジュース == 'コーヒー' ) {
        
        return コーヒーの缶;
    }
}
```

まずは判定関数を常にユーザの勝ちとするようにしてみましょう。

```
    function 判定(ユーザの手, 相手の手) {
        /* 判定処理 */
        
        return 'ユーザ';
    }
```

そして、判定関数を呼び出す文も書きます。以下のように、判定関数が返した値を
alert関数で表示するようにしましょう。

```
        var 結果 = 判定();
        alert('判定結: ' + 結果);
```

次に、判定関数に引数を渡したいです。ユーザの手は選ぶ関数の引数に入っていますね。
それをそのまま使いましょう。

では相手の手はどうでしょうか。コンピュータ選ぶ関数内で、「乱数」変数に0、1、2がランダムで
入るようにし、画像も変わるようにしましたが、その「乱数」変数は「コンピュータ選ぶ」関数の
スコープの外では使うことができません。

そこで、コンピュータ選ぶ関数を、結果を返す関数に変えてしまいましょう。
返したい結果はもちろんコンピュータが選んだ「手」すなわち「乱数」変数です。

```
    function コンピュータ選ぶ() {
        var 乱数 = Math.random();
        乱数 = 乱数 * 3;
        乱数 = Math.floor(乱数);
        
        if ( 乱数 == 0 ) {
            コンピュータ.style.backgroundImage = 'url(./images/gu.png)';
        } else if ( 乱数 == 1 ) {
            コンピュータ.style.backgroundImage = 'url(./images/ch.png)';
        } else {
            コンピュータ.style.backgroundImage = 'url(./images/pa.png)';
        }
        
        return 乱数 // この一文を追加
    }
```

選ぶ関数を以下のように修正しましょう。

```
    function 選ぶ(n) {
        if ( n == 'グー' ) {
            プレーヤー.style.backgroundImage = 'url(./images/gu.png)';
        } else if ( n == 'チョキ' ) {
            プレーヤー.style.backgroundImage = 'url(./images/ch.png)';
        } else {
            プレーヤー.style.backgroundImage = 'url(./images/pa.png)';
        }
        
        var コンピュータの手 = コンピュータ選ぶ();
        
        var 結果 = 判定(n, コンピュータの手);
        alert('判定結果: ' + 結果);
    }
```

さて、これで判定関数の中で、「ユーザの手」「相手の手」が使えるようになりました。
あとはユーザがグーのとき、相手がチョキだったらユーザの勝ち、というように、
場合分けをしていきます。


```
    function 判定(ユーザの手, 相手の手) {
        // 判定処理
        if ( ユーザの手 == 'グー' ) {
            if ( 相手の手 == 0 ) {
                return 'あいこ';
            } else if ( 相手の手 == 'チョキ' ) {
                return 'ユーザ';
            } else {
                return ...
            }
        } else if ( ユーザの手 == 'チョキ' ) {
            ...
        } else {
            ...
        }
    }
```